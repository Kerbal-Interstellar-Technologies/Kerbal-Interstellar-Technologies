PART
{
	name = KspiNuclearSaltWaterRocket
	module = Part
	author = TiktaalikDreaming
	mesh = NewModel.mu
	scale = 1
	rescaleFactor = 0.5

	node_stack_top = 0.0, 10.2557, 0.0, 0.0, 1.0, 0.0, 5
	
	//node_attach_top = 0.0, 3.75, 0.0, 0.0, 1.0, 0.0, 5
	//node_stack_bottom = 0.0, -11.8, 0.0, 0.0, -1.0, 0.0

	fx_exhaustFlame_blue = 0.0, -125.6, 0.0, 0.0, 1.0, 0.0, running
	fx_exhaustLight_blue = 0.0, -1.6, 0.0, 0.0, 0.0, 1.0, running
	fx_smokeTrail_light = 0.0, -0.6, 0.0, 0.0, 1.0, 0.0, running

	sound_vent_medium = engage
	sound_rocket_hard = running
	sound_vent_soft = disengage
	sound_explosion_low = flameout

	TechRequired = exoticNuclearPropulsion
	entryCost = 400000
	cost = 400000
	category = Engine
	subcategory = 0
	title = Nuclear Salt Water Rocket
	manufacturer = Konvair division of Kerbal Dynamics

	description = Nuclear Salt Water Rocket was invented by Robert Zubrin as a theoretical type of nuclear thermal rocket for interplanetary propulsion. A conservative design for the rocket would be fueled by salts of 20 percent enriched uranium or plutonium. The solution would be contained in a bundle of pipes coated in boron carbide (for its properties of neutron absorption). Through a combination of the coating and space between the pipes, the contents would not reach critical mass until the solution is pumped into a reaction chamber, thus reaching a critical mass, and being expelled through a nozzle to generate thrust. The exhaust of the NSWR is highly radioactive, as no attempt has been made to retain the fission products within the engine, however, with an exhaust velocity of 66 km/s, the radioactive products are emitted with a velocity far exceeding the escape velocity of the Earth and, providing the engine was directed to thrust perpendicular to the radial vector connecting the spacecraft in LEO to the Earth’s centre. 
	
	attachRules = 1,0,1,1,0
	mass = 22
	heatConductivity = 0.04 
	emissiveConstant = 0.83 // engine nozzles are good at radiating, NTRs even better
	dragModelType = default
	maximum_drag = 0.2
	minimum_drag = 0.2
	angularDrag = 2
	crashTolerance = 12
	maxTemp = 3800
	bulkheadProfiles = size3
	explosionPotential = 40

	EFFECTS
	{
		engage
		{
			AUDIO
			{
			  channel = Ship
			  clip = sound_vent_medium
			  volume = 1.0
			  pitch = 2.0
			  loop = false
			}
		}
		flameout
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_exhaustSparks_flameout_2
				transformName = Thrust
				oneShot = true
			}
			AUDIO
			{
			  channel = Ship
			  clip = sound_explosion_low
			  volume = 1.0
			  pitch = 2.0
			  loop = false
			}
		}
		plasma-nozzle-plume
		{
			AUDIO
			{
				  channel = Ship
				  clip = sound_rocket_hard
				  volume = 0.0 0.0
				  volume = 1.0 1.0
				  pitch = 0.0 0.2
				  pitch = 1.0 1.0
				  loop = true
			}
			PREFAB_PARTICLE
			{
				prefabName = fx_smokeTrail_veryLarge
				transformName = Thrust
				emission = 0.0 0.0
				emission = 0.05 0.0
				emission = 0.075 0.25
				emission = 1.0 1.25
				speed = 0.0 0.25
				speed = 1.0 1.0
				localOffset = 0, 0, 0
			}
			MODEL_MULTI_PARTICLE
			{
				modelName = Squad/FX/ks25_Exhaust			// Yellow/Orange(/green)-white; size fits
				transformName = Thrust
				emission = 0.0 0.0
				emission = 0.05 0.0
				emission = 0.075 0.25
				emission = 1.0 1.25
				speed = 0.0 0.5
				speed = 1.0 1.2
			}
		}
	}

	MODULE
	{
		name = ModuleEnginesWarp

		propellant1 = NuclearSaltWater
		ratio1 = 1

		EngineType = Nuclear
		thrustVectorTransformName = Thrust
		exhaustDamage = True
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 5091
		heatProduction = 830
		fxOffset = 0, 0, 2		
		useEngineResponseTime = True
		engineAccelerationSpeed = 0.8
		engineDecelerationSpeed = 0.8

		PROPELLANT
		{
			name = NuclearSaltWater
			ratio = 1.0
			DrawGauge = True
		}

		atmosphereCurve
		{
			key = 0 5000
			key = 1 100
			key = 2 50
		}
	}

	MODULE
	{
		name = ModuleGimbal
		gimbalTransformName = Gimballed
		gimbalRange = 2.0
	}

	RESOURCE
	{
		name = ThermalPower
		amount = 0
		maxAmount = 3000
		isTweakable = false
		hideFlow = false
	}

	RESOURCE
	{
		name = WasteHeat
		amount = 0
		maxAmount = 200000
		isTweakable = false
		hideFlow = false
	}

	RESOURCE
	{
		name = NuclearSaltWater
		amount = 100
		maxAmount = 100
	}

	MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 0
		fxMax = 0.7
		maxDistance = 250
		falloff = 2.5
		thrustTransformName = Thrust
	}

	MODULE
	{
		name = InterstellarFissionNTR

		upgradeTechReqMk2 = exoticRadiators
		upgradeTechReqMk3 = extremeRadiators

		basePowerOutputMk1 = 40000
		basePowerOutputMk2 = 60000
		basePowerOutputMk3 = 90000

		minimumThrottleMk1 = 0.0000
		minimumThrottleMk2 = 0.0000
		minimumThrottleMk3 = 0.0000

		coreTemperatureMk1 = 100000
		coreTemperatureMk2 = 200000
		coreTemperatureMk3 = 400000

		supportMHD = false
		radius = 2.5
		partMass = 22
		consumeGlobal = false
		reactorType = 4096				// Nuclear Salt Water

		reactorSpeedMult = 0.25 			// modifies the engines acceleration time
		bonusBufferFactor = 1
		fuelEfficiency = 0.002				// very low efficiency
		temperatureThrotleExponent = 1

		minCoolingFactor = 1				// Can use any liquid propellant
		
		engineHeatProductionMult = 1 			
		plasmaHeatProductionMult = 0.25
		engineWasteheatProductionMult = 1.5		// tripple wasteheat production production
		plasmaWasteheatProductionMult = 0.5

		heatTransportationEfficiency = 0.8
		hotBathTemperature = 3200

		thermalPropulsionEfficiency = 1			// can use use thermal propulsion
		plasmaPropulsionEfficiency = 1			// can use plasma nozzle
		chargedParticlePropulsionEfficiency = 0		// cannot use magnetic nozzle

		thermalEnergyEfficiency = 0			// can use thermal power generator
		plasmaEnergyEfficiency = 0			// cannot use MHD generator		
		chargedParticleEnergyEfficiency = 0		// cannot use direct power generator

		neutronEmbrittlementLifepointsMax = 100

		supportedPropellantAtoms = 32 	// Oxygen
		supportedPropellantTypes = 512  // Nuclear compound

		hasBuoyancyEffects = true
		geeForceTreshHold = 9
		geeForceMultiplier = 1
		geeForceExponent = 1
		minGeeForceModifier = 0.01

		hasOverheatEffects = true
		overheatTreshHold = 0.75
		overheatMultiplier = 2
		overheatExponent = 2
		minOverheatModifier = 0.01

		electricPowerPriority = 1 			// determines power production priority for connected generator
	}

	MODULE
	{
		name = ThermalNozzleController

		requiredMegajouleRatio = 0			// Does not require electric Power
		canUsePlasmaPower = true			// Can use plasma power if provided

		maxThermalNozzleIsp = 10000
		IspTempMultOffset = -0.2357269918213

		isJet = false
		radius = 2.5
		exitArea = 3
		partMass = 16
		maxTemp = 3200		

		sootHeatDivider = 50
		sootThrustDivider = 150

		showPartTemperature = true
		limitedByMaxThermalNozzleIsp = false
		
		powerTrustMultiplier = 1
		powerTrustMultiplierJet = 1

		EffectNameLithium = plasma-nozzle-plume
		EffectNameNonLFO = plasma-nozzle-plume
	}

	MODULE
	{
		name = TweakScale
		type = stack_interstellar
		defaultScale = 2.5
		scaleFactors = 2.5, 3.75, 5, 7.5, 10, 15, 20, 30, 40
	}

	MODULE	
	{
		name = FXModuleLookAtConstraint
		CONSTRAINLOOKFX
		{
			targetName = GasActuator
			rotatorsName = ActuatorPiston
		}
		CONSTRAINLOOKFX
		{
			targetName = ActuatorPiston
			rotatorsName = GasActuator
		}
	}

	MODULE	
	{
		name = FXModuleLookAtConstraint
		CONSTRAINLOOKFX
		{
			targetName = GasActuator_001
			rotatorsName = ActuatorPiston_001
		}
		CONSTRAINLOOKFX
		{
			targetName = ActuatorPiston_001
			rotatorsName = GasActuator_001
		}
	}

	MODULE	
	{
		name = FXModuleLookAtConstraint
		CONSTRAINLOOKFX
		{
			targetName = GasActuator_002
			rotatorsName = ActuatorPiston_002
		}
		CONSTRAINLOOKFX
		{
			targetName = ActuatorPiston_002
			rotatorsName = GasActuator_002
		}
	}	

	MODULE	
	{
		name = FXModuleLookAtConstraint
		CONSTRAINLOOKFX
		{
			targetName = GasActuator_003
			rotatorsName = ActuatorPiston_003
		}
		CONSTRAINLOOKFX
		{
			targetName = ActuatorPiston_003
			rotatorsName = GasActuator_003
		}
	}

}

