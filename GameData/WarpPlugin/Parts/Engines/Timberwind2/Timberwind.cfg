PART
{

	name = KspiTimberwind
	module = Part
	author = Kommitz
	
	// -------- Model -------- 
	scale = 1
	rescaleFactor = 1
	
	MODEL
	{
		 model = WarpPlugin/Parts/Engines/Timberwind2/n_ftmn180
	}
	MODEL
	{
		 model = WarpPlugin/Parts/Engines/Timberwind2/fairing180
	}
	
	// -------- Attach -------- 
	node_stack_top = 0.0, 1.445, 0.0, 0.0, 1.0, 0.0, 2
	node_stack_bottom = 0.0, -2.735, 0.0, 0.0, -1.0, 0.0, 2
	node_attach = 0.0, 1.445, 0.0, 0.0, 1.0, 0.0, 2
	
	// -------- FX -------- 
	
	EFFECTS
	{
		run_ftmn180
		{
			AUDIO
			{
				channel = Ship
				clip = SpaceTuxIndustries/RecycledParts/ftmn_new/sounds/2m_run
				volume = 0.0 0.0 
				volume = 0.01 0.5
				volume = 0.5 0.75 
				volume = 1.0 1.0
				pitch = 0.0 2.0
				pitch = 0.5 1.5
				pitch = 1.0 1.0
				loop = true
			}
			
			MODEL_MULTI_PARTICLE
			{
				modelName = SpaceTuxIndustries/RecycledParts/ftmn_new/effects/mid_nfx
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.05 0.5
				emission = 0.5 1.0
				emission = 1.0 2.0
				speed = 0.0 0.5
				speed = 1.0 2.0
			}
		}	
		engage
		{
			AUDIO
			{
				channel = Ship
				clip = SpaceTuxIndustries/RecycledParts/ftmn_new/sounds/large_start
				volume = 1.0
				pitch = 1.0
				loop = false
			}
		}
		disengage
		{
			AUDIO
			{
				channel = Ship
				clip = SpaceTuxIndustries/RecycledParts/ftmn_new/sounds/
				volume = 1.0
				pitch = 1.0
				loop = false
			}
		}
	}
	
	// -------- Editor ---------
	
	TechRequired = advNuclearPropulsion
	entryCost = 160000
	cost = 160000
	
	category = Engine
	subcategory = 0

	title = #LOC_KSPIE_Timberwind_title // #LOC_KSPIE_Timberwind_title = "Timberwind" Particle Bed Fission Engine
	manufacturer = Post Terran Mining Corporation
	description = #LOC_KSPIE_Timberwind_descr // #LOC_KSPIE_Timberwind_descr = The Timberwind is a high performance particle bed fission reactor with a high thrust to mass ratio for a nuclear engine. It can run several neutral and reducing liquid mono propellant, depending on unlocked fuel technology. It has an integrated thermal electric power generator which feeds from its fuel radioactive decay once activated. Its performance depends on advances in nuclear reactor technologies.
	
	// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	attachRules = 1,1,1,0,0
	
	
	// -------- Stats ---------
	heatConductivity = 0.06 // half default
	skinInternalConductionMult = 4.0
	emissiveConstant = 0.85 // engine nozzles are good at radiating, NTRs even better
	radiatorMax = 0.35 //Default = 0.25 but nuke engines are meant to run hot

	mass = 4
	dragModelType = default
	maximum_drag = 0.2
	minimum_drag = 0.2
	angularDrag = 2
	crashTolerance = 6
	breakingForce = 200
	breakingTorque = 200
	maxTemp = 2800

	bulkheadProfiles = size2
	
	tags = #autoLOC_500438 //#autoLOC_500438 = active atom efficient engine inter liquid (nerv nuclear nuke orbit propuls radio reactor vacuum

	// Resources
	RESOURCE
	{
		name = ThermalPower
		amount = 0
		maxAmount = 3000
	  	isTweakable = false
		hideFlow = false
	}

	RESOURCE
	{
	 	name = Megajoules
	 	amount = 0
	 	maxAmount = 10
	  	isTweakable = false
		hideFlow = false
	}

	RESOURCE
	{
		name = ElectricCharge
		amount = 0
		maxAmount = 10
	  	isTweakable = false
		hideFlow = false
	}

	RESOURCE
	{
		name = WasteHeat
		amount = 0
		maxAmount = 2000000
	  	isTweakable = false
		hideFlow = false
	}

	RESOURCE
	{
		name = UraniumNitride
		amount = 25
		maxAmount = 25
	}

	RESOURCE
	{
		name = DepletedFuel
		amount = 0
		maxAmount = 25
	}


	MODULE
	{
		name = InterstellarPebbleBedFissionEngine

		reactorSpeedMult = 0.5 				// modifies the engines acceleration time
	
		upgradeTechReqMk2 = specializedRadiators
		upgradeTechReqMk3 = advNuclearPower
		upgradeTechReqMk4 = expNuclearPropulsion

		basePowerOutputMk1 = 3000
		basePowerOutputMk2 = 4000
		basePowerOutputMk3 = 5000
		basePowerOutputMk4 = 6000

		coreTemperatureMk1 = 2267.57
		coreTemperatureMk2 = 2267.57
		coreTemperatureMk3 = 2267.57
		coreTemperatureMk4 = 2267.57

		fuelEfficencyMk1 = 0.3
		fuelEfficencyMk2 = 0.4
		fuelEfficencyMk3 = 0.5
		fuelEfficencyMk4 = 0.6

		minimumThrottleMk1 = 0.00035
		minimumThrottleMk2 = 0.00030
		minimumThrottleMk3 = 0.00025
		minimumThrottleMk4 = 0.00020

		reactorType = 4
		partMass = 4
		radius = 2.5

		heatThrottling = true
		thermalRatioEfficiencyModifier = 0.81

		coreTemperatureWasteheatPower = 0.3
		coreTemperatureWasteheatModifier = -0.2
		coreTemperatureWasteheatMultiplier = 1

		thermalPropulsionEfficiency = 1			// can use thermal propulsion
		plasmaPropulsionEfficiency = 0			// cannot use plasma nozzle
		chargedParticlePropulsionEfficiency = 0		// cannot use magnetic nozzle

		thermalEnergyEfficiency = 1			// can use thermal power generator
		plasmaEnergyEfficiency = 0			// cannot use MHD generator		
		chargedParticleEnergyEfficiency = 0		// cannot use direct power generator

		thermalProcessingModifier = 0.75

		electricPowerPriority = 4
	}

	MODULE
	{
		name = ThermalElectricEffectGenerator

		calculatedMass = false
		isLimitedByMinThrotle = true
		chargedParticleMode = false
		showDetailedInfo = false

		efficiencyMk1 = 0.04
		efficiencyMk2 = 0.06
		efficiencyMk3 = 0.08
		efficiencyMk4 = 0.10
		efficiencyMk5 = 0.12

		Mk2TechReq = specializedElectrics
		Mk3TechReq = experimentalElectrics
		Mk4TechReq = highTechElectricalSystems
		Mk5TechReq = highPowerElectricalSystems

		originalName = Thermal Electric Generator Mk1
		upgradeTechReq = Thermal Electric Generator Mk2

		upgradeCost = 220
		radius = 2.5
	}

	MODULE
	{
		name = ThermalNozzleController

		originalName = Thermal Nozzle
		upgradedName = Thermal Nozzle

		upgradeCost = 50
		maxTemp = 3200
		partMass = 10 
		radius = 2.5
		exitArea = 1
		isJet = false

		sootHeatDivider = 50
		sootThrustDivider = 150

		delayedThrottleFactor = 0.5
		heatProductionMult = 1

		emisiveConstantMult = 3
		emisiveConstantExp = 0.6

		powerTrustMultiplier = 1
		powerTrustMultiplierJet = 1

		emissiveConstant = 0.85
		heatConductivity = 0.06

		EffectNameNonLFO = run_ftmn180

		supportedPropellantAtoms = 155 				// H + He + C + N + A = 1 + 2 + 8 + 16 + 128
		supportedPropellantTypes = 511  			// any molecular type
	}

	MODULE
	{
		name = ModuleEnginesWarp
		engineID = ftmn180
		//runningEffectName = run_ftmn180
		thrustVectorTransformName = thrustTransform
		exhaustDamage = True
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 180
		heatProduction = 680
		EngineType = Nuclear
	
		PROPELLANT
		{
			name = LqdHydrogen
        		ratio = 1
			DrawGauge = True
		}
		atmosphereCurve
 		{
   	 		key = 0 1000
  	 		key = 1 0
 		}		
	}
	
	MODULE
	{
		name = ModuleGimbal
		gimbalTransformName = gimbal
		gimbalRange = 3
	}
	
	MODULE
	{
		name = FXModuleAnimateThrottle
		animationName = ftmn180Heat
		responseSpeed = 0.001
		dependOnEngineState = True
		dependOnThrottle = True
	}
	
	MODULE
	{
		name = FXModuleLookAtConstraint
		CONSTRAINLOOKFX
		{
			targetName = pistonTgt1
			rotatorsName = piston1
		}
		CONSTRAINLOOKFX
		{
			targetName = pistonTgt2
			rotatorsName = piston2
		}
		CONSTRAINLOOKFX
		{
			targetName = piston1
			rotatorsName = gimbal1
		}
		CONSTRAINLOOKFX
		{
			targetName = piston2
			rotatorsName = gimbal2
		}
		CONSTRAINLOOKFX
		{
			targetName = pistonTgt3
			rotatorsName = piston3
		}
		CONSTRAINLOOKFX
		{
			targetName = pistonTgt4
			rotatorsName = piston4
		}
		CONSTRAINLOOKFX
		{
			targetName = piston3
			rotatorsName = gimbal3
		}
		CONSTRAINLOOKFX
		{
			targetName = piston4
			rotatorsName = gimbal4
		}
	}
	
	MODULE
	{
		name = ModuleJettison
		jettisonName = fairing
		bottomNodeName = bottom
		isFairing = True
		jettisonedObjectMass = 0.1
		jettisonForce = 1
		jettisonDirection = -1 0 0
	}
}
